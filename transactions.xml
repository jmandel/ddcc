<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R5/fhir-single.xsd">
  
  <h3 id="submit-health-event">Submit Health Event</h3> 
  The Submit Health Event transaction is initiated by a <a href="actors.html#digital-health-solution">Digital Health Solution</a> system against the <a href="actors.html#ddcc-generator">DDCC Generator</a>.

  {% include submit_health_event.svg %}
  

  <h4  id="submit-health-event-trigger">Trigger Event </h4>
  The Submit Health Event transaction may be initiated in any of the following ways:
  <ul>
    <li>The <a href="actors.html#digital-health-solution">Digital Health Solution</a> system is online and a health event was recorded by the Vaccinator or the Data Entry Personnel</li>
    <li>The <a href="actors.html#digital-health-solution">Digital Health Solution</a> system comes online after recording one or more health events while in an offline mode</li>
    <li>The <a href="actors.html#digital-health-solution">Digital Health Solution</a> is used to record health events recorded on a paper register sometime after the event</li>
  </ul>

  <h4 id="register-health-certificate-message-semantics">Message Semantics</h4>

  <h5 id="register-health-certificate-message-semantics-request"> Message Semantics Request</h5>
    The message semantics for the Register Health  Certificate transaction utilizes a <a href="StructureDefinition-DDCCSubmitHealthEventRequest.html">DDCC Submit Health Event Request</a> which is a batch Bundle of <a href="StructureDefinition-DDCCGenerateHealthCertificateParameters.html">Parameters</a> for the <a href="OperationDefinition-DDCC-QuestionnaireReponse-generateHealthCertificate.html">Generate Health Certificate Operation</a> which include <a href="StructureDefinition-DDCCQQuestionnaireResponse.html">DDCC Questionnaire Response</a> resources for the request message. The specific DDCC Questionnaire Response resource is determined by the health event that is the subject of the transaction  
  
  <h5 id="register-health-certificate-message-semantics-response"> Message Semantics Response</h5>
    The response to a Register Health Certificate transaction is a <a href="StructureDefinition-DDCCSubmitHealthEventResponse.html">DDCC Submit Health Event Response</a> which consists of a Bundle of type batch-response following the FHIR specification for <a href="https://www.hl7.org/fhir/http.html#transaction-response">transaction responses</a>.  

  <h4 id="submit-health-event-preconditions"> Pre-conditions</h4>
  The DDCC Generator should have a Document Signing Certificate (DSC) issued by the <a href="actors.html#public-health-authority">Public Health Authority</a> and registered with an approved Public Key Directory such as the National Public Key Directory.  

  When a jurisdiction participates in the Digital-Online scenario, the DSC should be registered with an approved Public Key Directory.
  
  <h4 id="submit-health-event-expected-actions"> Expected Actions</h4>
  The following are the expected actions for the actors participating in this transaction:
  <ul>
    <li>
      The <a href="actors.html#ddcc-generator">DDCC Generator</a>:
      <ol>
	<li>may serialize the <a href="StructureDefinition-DDCCQuestionnaireResponse.html">DDCC Questionnaire Response</a> content as payload for encoding as a QR code</li>
	<li>may use their DSC to sign the QR Code Content as part of the QR Content schema</li>
	<li>shall generate and sign a <a href="StructureDefinition-DDCCDocument.html">DDCC Document</a></li>
	<li>shall return the generated signed <a href="StructureDefinition-DDCCDocument.html">DDCC Document</a> to the  <a href="actors.html#digital-health-solution">Digital Health Solution</a> system</li>
      </ol>
    </li>
    <li>
      If a jurisdiction also participates in the Digital-Online scenario, the <a href="actors.html#ddcc-generator">DDCC Generator</a>:
      <ol>
        <li>shall determine if the paper id associated with the transaction already has content in the registry using the <a href="transactions.html#retrieve-health-folder">Retrieve Health Folder</a> transaction</li>
	<li>shall initiate a <a href="transactions.html#register-health-certificate">Register Health Certificate</a> transaction using the generated <a href="StructureDefinition-DDCCDocument.html">DDCC Document</a> </li>
	<li>include the resulting <a href="actors.html#ddcc-registry">DDCC Registry Service</a> endpoints for signed DDCC as part of the response message</li>
      </ol>
    </li>
  </ul>
  
  
  <h3 id="register-health-certificate"> Register Health Certificate</h3>  
  The Register Health Certiciate transaction is initiated by a <a href="actors.html#ddcc-generator">DDCC Generator</a> system against the <a href="actors.html#ddcc-registry">DDCC Registry Service</a>.  This is based off of the <a href="https://profiles.ihe.net/ITI/MHD/ITI-65.html">Provide Document Bundle [ITI-65]</a> transaction from the MHD profile.

  {% include register_certificate.svg %}
  
  <h4 id="register-health-certificate-trigger"> Trigger Event</h4>
  The Register Health Certificate transaction is initiated when a <a href="actors.html#ddcc-generator">DDCC Generator</a> receives a valid Submit Health Event request from a <a href="actors.html#digital-health-solution">Digital Health Solution</a> system in a Digital-Online scenario.

  <h4 id="register-health-certificate-message-semantics"> Message Semantics</h4>

  The DDCC Generator will follow the message semantics from <a href="https://profiles.ihe.net/ITI/MHD/ITI-65.html#2365412-message-semantics">MHD's Provide Document Bundle transaction [ITI-65]</a>.

  The DDCC Generator will compose a <a href="StructureDefinition-DDCCProviceDocumentBundle.html">DDCC Provide Document Bundle</a> to submit to the DDCC Registry.
  
  <h4 id="register-health-certificate-expected-actions"> Expected Actions</h4>
  
  The actors will follow the expected actions from <a href="https://profiles.ihe.net/ITI/MHD/ITI-65.html#2365413-expected-actions">MHD's ITI-65</a>.

  
  <h3 id="retrieve-health-certificate-reference"> Retrieve Health Certificate Reference</h3>  
  The Retrieve Health Certiciate transaction is used in the Digital-Online context and is used for the retrieval and optional verification of a single line of a DDCC.

  The Retrieve Health Certificate transaction may be initiated by a <a href="actors.html#verifier">Verifier</a> against the <a href="actors.html#ddcc-registry">DDCC Registry Service</a> in a jursidicition particpating in the Digital-Online scenario.

	  The Retrieve Health Certificate Reference transaction is based on <a href="https://profiles.ihe.net/ITI/MHD/ITI-67.html">MHD's Find Document References transaction [ITI-67]</a>.  It can be used to verify the existence of the Document Reference for the Immunization event.  All message semantics and expected actions are the same as documented by MHD.


  {% include retrieve_health_certificate.svg %}
  
  <h4 id="retrieve-health-certificate-trigger"> Trigger Event</h4>  
  The Retrieve Health Certificate Reference may be initiated by:
  <ol>
    <li> a <a href="actors.html#verifier">Verifier</a> wishing to validate and verify a DDCC</li>
  </ol>



  <h3 id="retrieve-health-certificate"> Retrieve Health Certificate</h3>  
  The Retrieve Health Certiciate transaction is used in the Digital-Online context and is used for the retrieval and optional verification of a single line of a DDCC.

  The Retrieve Health Certificate transaction may be initiated by a <a href="actors.html#verifier">Verifier</a> or <a href="actors.html#digital-health-solution">Digital Health Solution</a> against the <a href="actors.html#ddcc-repository">DDCC Repository Service</a> in a jursidicition particpating in the Digital-Online scenario after retrieving the location from the <a href="#retrieve-health-certificate-reference">Retrieve Health Certificate Reference</a> or <a href="#retrieve-health-folder">Retrieve Health Folder</a> transactions.

	  The Retrieve Health Certificate transaction is based on <a href="https://profiles.ihe.net/ITI/MHD/ITI-68.html">MHD's Retrieve Document transaction [ITI-68]</a>.  It can be used to verify the contents of a DDCC Immunization event.


  {% include retrieve_health_certificate.svg %}
  
  <h4 id="retrieve-health-certificate-trigger"> Trigger Event</h4>  
  The Retrieve Health Certificate may be initiated by:
  <ol>
    <li> a <a href="actors.html#verifier">Verifier</a> wishing to validate and verify a DDCC</li>
    <li> a <a href="actors.html#digital-health-solution">Digital Health Solution</a> wishing to retrieve a DDCC for continuity of care</li>
  </ol>

  
  <h3 id="retrieve-health-folder"> Retrieve Health Folder</h3>  
  The Retrieve Health Folder transaction is used in the Digital-Online context and is used for the retrieval and optional verification of DDCC contained in the <a href="StructureDefinition-DDCCFolder.html">DDCC Folder</a>.

  The Retrieve Health Folder transaction may be initiated by a <a href="actors.html#verifier">Verifier</a> or <a href="actors.html#digital-health-solution">Digital Health Solution</a> against the <a href="actors.html#ddcc-registry">DDCC Registry Service</a> in a jursidicition particpating in the Digital-Online scenario.


	  The Retrieve Health Folder transaction is based on <a href="https://profiles.ihe.net/ITI/MHD/ITI-66.html">MHD's Find Document Lists transaction [ITI-66]</a>.  It can be used to find a DDCC Folder for a DDCC Patient with all the Immunization events.

  {% include retrieve_health_folder.svg %}
  
  <h4 id="retrieve-health-folder-trigger"> Trigger Event</h4>  
  The Retrieve Health Folder may be initiated by:
  <ol>
    <li> a <a href="actors.html#verifier">Verifier</a> wishing to validate and verify content of a DDCC</li>
    <li> a <a href="actors.html#digital-health-solution">Digital Health Solution</a> wishing to retrieve a DDCC for continuity of care</li>
  </ol>

</div>

